<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
        <div>
            <form id="login">
                <input type="name" placeholder="username">
                <input type="password" placeholder="password">
                <input type="submit">
            </form>
                
        </div>
     <script>
        
        let user=[]
        let login=document.getElementById("login")
        let getuserdata=async()=>
        {let res=await fetch('http://localhost:3000/users')
        .then(data=> data.json())
        .then(data=>user=data)
        }
        getuserdata()
         

        
        
        
            
        
        
        
        login.addEventListener("submit",(event)=>
        {
            handlelogin(event)
        })

        let handlelogin=(e)=>
        {
            e.preventDefault()
            
            let username=e.target[0].value
            let password=e.target[1].value
          
            if(user.length>0)
            {
                for(let i=0;i<user.length;i++)
                {
                    let currentuser=user[i]
                    if(currentuser.name===username && currentuser.password===password)
                    {
                        localStorage.setItem("loggedin",true)
                        window.location.href="index.html"
                    }

                    

                }
            }
                
            
        }
     </script>
</body>
</html>